<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <title>SF - Neighborhood Survey Builder</title>
    <script src='wax/ext/leaflet.js' type='text/javascript'></script>
    <script src='wax/dist/wax.leaf.js' type='text/javascript'></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <link href='wax/ext/leaflet.css' rel='stylesheet' type='text/css' />
    
    <style type="text/css" media="screen">
      body {
          padding: 0;
          margin: 0;
      }
      html, body, #map {
          height: 100%;
      }
      
    </style>
    <script type="text/javascript" charset="utf-8">
      var map;
    
      wax.tilejson('http://api.tiles.mapbox.com/v2/mapbox.geography-class.jsonp',
        function(tilejson) {
          map = new L.Map('map-div');
          map.addLayer(new wax.leaf.connector(tilejson));
          
      		map.on('locationfound', onLocationFound);
      		map.on('locationerror', onLocationError);

      		map.locateAndSetView(18);

      		function onLocationFound(e) {
      			var radius = e.accuracy / 2;

      			var marker = new L.Marker(e.latlng);
      			map.addLayer(marker);
      			marker.bindPopup("You are within " + radius + " meters from this point").openPopup();

      			var circle = new L.Circle(e.latlng, radius);
      			map.addLayer(circle);
      		}

      		function onLocationError(e) {
      			alert(e.message);
      		}

      });
      
      
    </script>
</head>

<body>
    <div id="container">
        
        <div id='map-div' style="height:350px;"></div>
        
    </div>
</body>
</html>